"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.componentizeGraph = void 0;
const scc = require("strongly-connected-components");
function componentizeGraph(graph) {
    const nodes = graph.nodes;
    const nodeToIndex = new Map();
    nodes.forEach((n, i) => nodeToIndex.set(n.id, i));
    const gr = nodes.map(() => []);
    graph.links.forEach((link) => {
        const targetIndex = nodeToIndex.get(link.target);
        const sourceTarget = nodeToIndex.get(link.source);
        gr[sourceTarget].push(targetIndex);
    });
    const components = scc(gr).components.map((c) => c.map((i) => nodes[i].id));
    return components;
}
exports.componentizeGraph = componentizeGraph;
